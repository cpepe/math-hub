<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Operator Madness - MathHub</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <style>
        .number-group {
            font-size: 2.5rem;
            font-family: 'Courier New', monospace;
            font-weight: bold;
        }
        .target-number {
            font-size: 3rem;
            color: #198754; /* Bootstrap success green */
            border: 4px solid #198754;
        }
        .operand-chip {
            display: inline-block;
            padding: 0.5rem 1rem;
            margin: 5px;
            border-radius: 5px;
            background-color: #f0f0f0;
            border: 1px solid #ccc;
            opacity: 1;
            transition: opacity 0.3s;
        }
    </style>
</head>
<body class="bg-light">

<nav class="navbar navbar-light bg-white border-bottom mb-5">
    <div class="container">
        <a class="navbar-brand" href="../../index.html">‚Üê Back to Hub</a>
        <span class="navbar-text fw-bold">Operator Madness</span>
    </div>
</nav>

<div class="container text-end mb-3">
    <span class="badge bg-info text-dark fs-6">
        Total Score: <span id="session-score-display">0</span> pts
    </span>
</div>

<div class="container game-container text-center">
    <h1 class="mb-4">Create the Equation</h1>

    <div id="start-card" class="card shadow-lg p-5 mb-4 text-center">
        <h2 class="text-primary">Welcome to Operator Madness!</h2>
        <p class="lead"> Add, subtract, multiply, or divide the four numbers to equal the goal. </p>
        <button onclick="startGame()" class="btn btn-success btn-lg mt-3">New Game</button>
    </div>

    <div id="game-content" class="d-none">

        <div class="card shadow-sm p-4 mb-4">
            <h3 class="text-muted mb-3">Use these numbers to reach the target:</h3>

            <div id="operand-group" class="number-group mb-4">
                </div>

            <h3 class="text-muted mb-3">Goal</h3>
            <div id="target-container" class="d-inline-block p-3 rounded-3 target-number">
                0
            </div>
        </div>

        <div class="card shadow-lg p-4">
            <h4 class="mb-3">Your Equation:</h4>

            <div id="feedback-message" class="alert alert-danger d-none" role="alert"></div>

            <input type="text" id="equation-input" class="form-control form-control-lg text-center mb-3" placeholder="e.g. Goal=0; 3 * (4 - 2) + 1" autocomplete="off">

            <div class="d-grid gap-2 d-md-flex justify-content-md-center">
                <button onclick="submitEquation()" class="btn btn-success btn-lg px-4">Submit</button>
                <button onclick="startGame()" class="btn btn-secondary btn-lg px-4">New Game</button>
            </div>
        </div>

    </div> </div>

<div class="modal fade" id="resultModal" tabindex="-1" aria-labelledby="resultModalLabel" aria-hidden="true">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="resultModalLabel">Result</h5>
        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
      </div>
      <div class="modal-body" id="modal-body-content">
        </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-primary" data-bs-dismiss="modal" onclick="startGame()">Next Puzzle</button>
      </div>
    </div>
  </div>
</div>

<script src="script.js"></script>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>

<script>
    document.addEventListener('DOMContentLoaded', () => {
        getDOMElements(); // Assigns all element references
        displayCurrentScore(); // Sets score display
        // NOTE: startGame() is intentionally NOT called here. It is called only by the user click.
    });
</script>
</body>
</html>
